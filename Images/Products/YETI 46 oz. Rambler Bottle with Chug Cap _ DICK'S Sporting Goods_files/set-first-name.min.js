!function(){var e,t,n,o,i,s,r={2035:function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(7831).setCookie,s=["error","warn"],r=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[200],i=new XMLHttpRequest;return new Promise((function(s,r){i.onreadystatechange=function(){4===i.readyState&&(o.includes(i.status)?s(i):r({status:i.status,statusText:i.statusText}))},i.open(t||"GET",e,!0),i.setRequestHeader("Cache-Control","no-cache,no-store,must-revalidate,max-age=0"),i.setRequestHeader("Expires","Sat, 01 Jan 2000 00:00:00 GMT"),i.timeout=1e4,i.ontimeout=function(){-1===e.indexOf("/log")&&w("debug","General","Request Timed Out",{url:e,method:t,body:n})},n?(i.setRequestHeader("Content-Type","application/json"),i.send(n)):i.send()}))},c=function(){return window.isAuthPromise?window.isAuthPromise:(window.isAuthPromise=new Promise((function(t){e=t})),new Promise((function(t){w("debug","isAuthenticated","Getting Status From Engine"),u().then((function(n){w("debug","isAuthenticated","result of getting isAuthenticated",n),e(void 0!==window.accessToken),t(void 0!==window.accessToken)})).catch((function(n){w("debug","isAuthenticated","Error getting tokens for isAuthenticated",n),e(!1),t(!1)}))})));var e},u=function(){return window.accessToken?(w("debug","getTokens","Getting Access Token From Memory"),new Promise((function(e){e(window.accessToken)}))):window.accessTokenPromise?(w("debug","getTokens","Subsequent Request Made"),window.accessTokenPromise):(window.accessTokenPromise=new Promise((function(n,o){e=n,t=o})),new Promise((function(n,o){w("debug","getTokens - Getting Access Token From Engine"),r("/api/v1/athletes/tokens/access","GET",{},[200,401]).then((function(t){401===t.status&&console.debug("Unauthorized request to get tokens");var o=void 0;t&&200===t.status&&(o=JSON.parse(t.response).accessToken),window.accessToken=o,window.accessToken&&(w("debug","getTokens","Successfully Retrieved Access Token"),a(window.accessToken)),e(window.accessToken),n(window.accessToken)})).catch((function(e){w("debug","getTokens","Failed to get tokens",e),t(e),o(e)}))})));var e,t},a=function(e){try{var t=new Date(1e3*JSON.parse(atob(e.split("Bearer ")[1].split(".")[1])).exp);t.setTime(t.getTime()-6e5),setTimeout((function(){d()}),t.getTime()-(new Date).getTime())}catch(e){w("debug","_establishTimeoutTrigger","Failed to Set Expiration Trigger",e)}},d=function(){delete window.accessToken,delete window.accessTokenPromise,delete window.isAuthPromise},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.pathname;r("/api/v1/athletes".concat(e?"?targetUrl=".concat(t):""),e?"GET":"DELETE").then((function(e){window.location.href=e.responseText})).catch((function(n){w("debug","_logInOrOut",{isLogin:e,target:t},n)}))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname;l(!0,e)},g=function(){i("SA_ShouldBeLoggedIn","false",-1),r("/api/v1/checkouts","DELETE").catch((function(e){w("warn","Failed to delete checkout session",e)})),l(!1,"/")},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=[],i=JSON.stringify(e,(function(e,t){return"object"===o(t)&&null!==t?n.includes(t)?void 0:n.push(t)&&t:t}),t);return n=null,i},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(e,t){n["additionalInfo".concat(t)]="string"!=typeof e?h(e):e})),{applicationName:"SAClient",logLevel:e.toUpperCase(),logProperties:n}},w=function(e){if(s.includes(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];r("/secured-athlete/api/v1/log","POST",JSON.stringify(m(e,n)),[204]).then((function(e){console.debug("SAClient","Log Successfully Posted To Engine",e.status)})).catch((function(e){console.debug("SAClient","Log Failed to Post to Engine",e)}))}};window.authFunctions={isAuthenticated:c,login:f,logout:g,getTokens:u},e.exports={_buildLoggerBody:m,_establishTimeoutTrigger:a,_getTokens:u,_isAuthenticated:c,_logInOrOut:l,_login:f,_logout:g,_makePromiseRequest:r,_resetAccessMemoryState:d,_saLogger:w,_safeStringify:h}},7831:function(e){var t=function(e){var t,n=document.cookie,o=e+"=",i=n.indexOf(o);if(-1==i){if(0!=(i=n.indexOf(o)))return null}else-1==(t=document.cookie.indexOf(";",i))&&(t=n.length);return decodeURI(n.substring(i+o.length,t))},n=function(e){var t=document.cookie.split(";");return(t=t.map((function(e){return{name:e.slice(0,e.indexOf("=")).trim(),value:e.slice(e.indexOf("=")+1)}}))).filter((function(t){return t.name.includes(e)}))},o=function(e,t,n){var o;if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()}else o="";return document.cookie=e+"="+t+o+"; path=/",!0};e.exports={checkCookie:function(e){return!!t(e)},getCookie:t,setCookie:o,deleteCookie:function(e){return o(e,"",-1)},queryCookiesByName:n,queryCookiesByNameAndValue:function(e,t){return n(e).filter((function(e){return e.value===t}))},replaceCookieValue:function(e,n,i,s){var r=t(e);if(void 0===r)return!1;r.toLowerCase()===n.toLowerCase()&&o(e,i,s)}}},7203:function(e){e.exports={makePromiseRequest:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[200],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],r=new XMLHttpRequest;return new Promise((function(c,u){for(var a in r.onreadystatechange=function(){4===r.readyState&&(i.includes(r.status)?c(r):u({status:r.status,statusText:r.statusText}))},r.open(t||"GET",e,!0),s&&(r.withCredentials=!0),o)Object.prototype.hasOwnProperty.call(o,a)&&r.setRequestHeader(a,o[a]);if(r.timeout=1e4,n){var d="application/json";Object.prototype.hasOwnProperty.call(o,"Content-Type")&&(d=o["Content-Type"]),r.setRequestHeader("Content-Type",d),r.send(n)}else r.send()}))}}}},c={};function u(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return r[e](n,n.exports,u),n.exports}t=(e=u(7831)).checkCookie,n=e.setCookie,o=u(7203).makePromiseRequest,i=u(2035)._getTokens,t(s="DCSG-ATHLETE-NAME")||i().then((function(e){void 0!==e&&o("/athleterecord/services/redirectingservice/identityservice/v1/identity","GET",{},{Authorization:e,partner_key:"secured_athlete",secret_key:"dRP1G9gSdkeaW9moacXO"}).then((function(e){var t=encodeURIComponent(JSON.parse(e.response).data.firstName);void 0!==t?(console.debug("Setting ".concat(s," cookie to value ").concat(t)),n(s,t,365.25)):n(s,"",7)})).catch((function(e){return console.debug("Error requesting info from Identity Service: ".concat(e))}))})).catch((function(e){return console.debug("getTokens call failed: ".concat(e))}))}();