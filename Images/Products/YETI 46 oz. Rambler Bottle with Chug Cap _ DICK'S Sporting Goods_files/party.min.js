!function(){var e={2796:function(e,t,n){var o=n(7203).makePromiseRequest,r=n(2035)._getTokens,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href;return a("nike",e)},s=function(){return l("nike")},c=function(){return Promise.resolve(u("nike"))},a=function(e,t){r().then((function(n){void 0!==n&&o("/api/v2/connections/partners/".concat(e,"?targetUrl=").concat(t),"GET",{},{Authorization:n}).then((function(t){return window.location.href=JSON.parse(t.response).authorizeUri,Promise.resolve("Redirecting athlete to ".concat(e," site"))})).catch((function(e){return console.debug("Unable to get URL to connect athlete: ".concat(e.responseText)),Promise.reject(new Error("Unable to get URL to connect athlete: ".concat(e.responseText)))}))})).catch((function(e){return console.debug("Error retrieving athlete tokens: ".concat(e.responseText)),Promise.reject(new Error("Error retrieving athlete tokens: ".concat(e.responseText)))}))},u=function(e){return r().then((function(t){if(void 0!==t)return o("/api/v2/connections/partners/".concat(e),"PUT",{},{Authorization:t}).then((function(t){return Promise.resolve("Success refreshing ".concat(e," response status : ").concat(t.status))})).catch((function(e){return console.debug("Unable to refresh athlete: ".concat(e.responseText)),Promise.reject(new Error("Unable to refresh athlete: ".concat(e.responseText)))}))})).catch((function(e){return console.debug("Error retrieving athlete tokens: ".concat(e.responseText)),Promise.reject(new Error("Error retrieving athlete tokens: ".concat(e.responseText)))}))},l=function(e){r().then((function(t){void 0!==t&&o("/api/v2/connections/partners/".concat(e),"DELETE",{},{Authorization:t}).then((function(t){return window.location.href=JSON.parse(t.response).disconnectUri,Promise.resolve("Redirecting athlete to ".concat(e," site"))})).catch((function(e){return console.debug("Unable to URL to disconnect athlete: ".concat(e.responseText)),Promise.reject(new Error("Unable to get URL to disconnect athlete: ".concat(e.responseText)))}))})).catch((function(e){return console.debug("Error retrieving athlete tokens: ".concat(e.responseText)),Promise.reject(new Error("Error retrieving athlete tokens: ".concat(e.responseText)))}))};window.connectionFunctions={connectAthleteToNike:i,disconnectAthleteFromNike:s,refreshAthleteFromNike:c},e.exports={_connectAthleteToNike:i,_disconnectAthleteFromNike:s,_refreshAthleteFromNike:c}},2035:function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=n(7831).setCookie,i=["error","warn"],s=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[200],r=new XMLHttpRequest;return new Promise((function(i,s){r.onreadystatechange=function(){4===r.readyState&&(o.includes(r.status)?i(r):s({status:r.status,statusText:r.statusText}))},r.open(t||"GET",e,!0),r.setRequestHeader("Cache-Control","no-cache,no-store,must-revalidate,max-age=0"),r.setRequestHeader("Expires","Sat, 01 Jan 2000 00:00:00 GMT"),r.timeout=1e4,r.ontimeout=function(){-1===e.indexOf("/log")&&w("debug","General","Request Timed Out",{url:e,method:t,body:n})},n?(r.setRequestHeader("Content-Type","application/json"),r.send(n)):r.send()}))},c=function(){return window.isAuthPromise?window.isAuthPromise:(window.isAuthPromise=new Promise((function(t){e=t})),new Promise((function(t){w("debug","isAuthenticated","Getting Status From Engine"),a().then((function(n){w("debug","isAuthenticated","result of getting isAuthenticated",n),e(void 0!==window.accessToken),t(void 0!==window.accessToken)})).catch((function(n){w("debug","isAuthenticated","Error getting tokens for isAuthenticated",n),e(!1),t(!1)}))})));var e},a=function(){return window.accessToken?(w("debug","getTokens","Getting Access Token From Memory"),new Promise((function(e){e(window.accessToken)}))):window.accessTokenPromise?(w("debug","getTokens","Subsequent Request Made"),window.accessTokenPromise):(window.accessTokenPromise=new Promise((function(n,o){e=n,t=o})),new Promise((function(n,o){w("debug","getTokens - Getting Access Token From Engine"),s("/api/v1/athletes/tokens/access","GET",{},[200,401]).then((function(t){401===t.status&&console.debug("Unauthorized request to get tokens");var o=void 0;t&&200===t.status&&(o=JSON.parse(t.response).accessToken),window.accessToken=o,window.accessToken&&(w("debug","getTokens","Successfully Retrieved Access Token"),u(window.accessToken)),e(window.accessToken),n(window.accessToken)})).catch((function(e){w("debug","getTokens","Failed to get tokens",e),t(e),o(e)}))})));var e,t},u=function(e){try{var t=new Date(1e3*JSON.parse(atob(e.split("Bearer ")[1].split(".")[1])).exp);t.setTime(t.getTime()-6e5),setTimeout((function(){l()}),t.getTime()-(new Date).getTime())}catch(e){w("debug","_establishTimeoutTrigger","Failed to Set Expiration Trigger",e)}},l=function(){delete window.accessToken,delete window.accessTokenPromise,delete window.isAuthPromise},d=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.pathname;s("/api/v1/athletes".concat(e?"?targetUrl=".concat(t):""),e?"GET":"DELETE").then((function(e){window.location.href=e.responseText})).catch((function(n){w("debug","_logInOrOut",{isLogin:e,target:t},n)}))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname;d(!0,e)},h=function(){r("SA_ShouldBeLoggedIn","false",-1),s("/api/v1/checkouts","DELETE").catch((function(e){w("warn","Failed to delete checkout session",e)})),d(!1,"/")},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=[],r=JSON.stringify(e,(function(e,t){return"object"===o(t)&&null!==t?n.includes(t)?void 0:n.push(t)&&t:t}),t);return n=null,r},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(e,t){n["additionalInfo".concat(t)]="string"!=typeof e?g(e):e})),{applicationName:"SAClient",logLevel:e.toUpperCase(),logProperties:n}},w=function(e){if(i.includes(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];s("/secured-athlete/api/v1/log","POST",JSON.stringify(p(e,n)),[204]).then((function(e){console.debug("SAClient","Log Successfully Posted To Engine",e.status)})).catch((function(e){console.debug("SAClient","Log Failed to Post to Engine",e)}))}};window.authFunctions={isAuthenticated:c,login:f,logout:h,getTokens:a},e.exports={_buildLoggerBody:p,_establishTimeoutTrigger:u,_getTokens:a,_isAuthenticated:c,_logInOrOut:d,_login:f,_logout:h,_makePromiseRequest:s,_resetAccessMemoryState:l,_saLogger:w,_safeStringify:g}},3582:function(e){e.exports={triggerAnalyticsEvent:function(e,t){console.debug("Firing event ".concat(e)),window.document.dispatchEvent(function(e,t){var n;return window.CustomEvent?n=new CustomEvent(e,{detail:t}):(n=window.document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),n}("".concat(e),Object.assign({},t)))}}},7831:function(e){var t=function(e){var t,n=document.cookie,o=e+"=",r=n.indexOf(o);if(-1==r){if(0!=(r=n.indexOf(o)))return null}else-1==(t=document.cookie.indexOf(";",r))&&(t=n.length);return decodeURI(n.substring(r+o.length,t))},n=function(e){var t=document.cookie.split(";");return(t=t.map((function(e){return{name:e.slice(0,e.indexOf("=")).trim(),value:e.slice(e.indexOf("=")+1)}}))).filter((function(t){return t.name.includes(e)}))},o=function(e,t,n){var o;if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toGMTString()}else o="";return document.cookie=e+"="+t+o+"; path=/",!0};e.exports={checkCookie:function(e){return!!t(e)},getCookie:t,setCookie:o,deleteCookie:function(e){return o(e,"",-1)},queryCookiesByName:n,queryCookiesByNameAndValue:function(e,t){return n(e).filter((function(e){return e.value===t}))},replaceCookieValue:function(e,n,r,i){var s=t(e);if(void 0===s)return!1;s.toLowerCase()===n.toLowerCase()&&o(e,r,i)}}},7203:function(e){e.exports={makePromiseRequest:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[200],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=new XMLHttpRequest;return new Promise((function(c,a){for(var u in s.onreadystatechange=function(){4===s.readyState&&(r.includes(s.status)?c(s):a({status:s.status,statusText:s.statusText}))},s.open(t||"GET",e,!0),i&&(s.withCredentials=!0),o)Object.prototype.hasOwnProperty.call(o,u)&&s.setRequestHeader(u,o[u]);if(s.timeout=1e4,n){var l="application/json";Object.prototype.hasOwnProperty.call(o,"Content-Type")&&(l=o["Content-Type"]),s.setRequestHeader("Content-Type",l),s.send(n)}else s.send()}))}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}!function(){var e=n(7203).makePromiseRequest,t=n(2035)._getTokens,o=n(2796)._refreshAthleteFromNike,r=n(3582).triggerAnalyticsEvent,i=null,s=!1;window.party={};var c=function(e){var t=new Date((new Date).getTime()+36e5).getTime();window.siteData.nikeConnected=a(e),window.party.attributes=e,window.sessionStorage.setItem("partyAttributes",JSON.stringify({partyAttributes:e,timestamp:t}))},a=function(e){for(var t=JSON.parse(e),n=0;n<t.attributes.length;n++)if("nike_connected"===t.attributes[n].id)return"true"===t.attributes[n].value;return!1};window.party.getPartyAttributes=function(n,u){return window.party.partyStarted||(window.party.partyStarted=new Promise((function(l,d){return function(e,n){return t().then((function(t){return!!t&&(i={Authorization:t,Partner_key:e,Secret_key:n,"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0,"Access-Control-Allow-Methods":"GET, OPTIONS","Access-Control-Allow-Headers":"Origin, X-Requested-With, Content-Type, Accept, x-client-key, x-client-token, x-client-secret, Authorization"},!0)})).catch((function(){return!1}))}(n,u).then((function(t){t?window.party.attributes?l(window.party.attributes):function(){var t=window.sessionStorage.getItem("partyAttributes"),n=function(){var e=["FAILED_FROM_DISCONNECT","SUCCESS_FROM_DISCONNECT","SUCCESS","FAILED","CANCEL","DUPLICATE_PARTNER_ID"],t=e.length,n=0;do{window.location.search.indexOf("CONNECTION_STATUS=".concat(e[n]))>-1?(t=n,n=e.length):n++}while(n<e.length);return t<e.length?e[t]:""}();if("FAILED"==n||"CANCEL"==n||"DUPLICATE_PARTNER_ID"==n)return o().catch((function(e){console.error("Error refreshing athlete",e)})).finally((function(){})).then((function(){return e("/myaccount/services/redirectingservice/partyquery/v1/attribute","GET",null,i,[200],!0).then((function(e){return s=a(e.response).toString(),r("NikeConnectComplete",{connected:s}),c(e.response),JSON.parse(e.response)})).catch((function(e){throw e}))}));if("SUCCESS"==n)return e("/myaccount/services/redirectingservice/partyquery/v1/attribute","GET",null,i,[200],!0).then((function(e){return s=a(e.response).toString(),r("NikeConnectComplete",{connected:s}),window.document.dispatchEvent(new Event("nikeConnectSuccess")),c(e.response),JSON.parse(e.response)})).catch((function(e){throw e}));if("SUCCESS_FROM_DISCONNECT"==n)return e("/myaccount/services/redirectingservice/partyquery/v1/attribute","GET",null,i,[200],!0).then((function(e){return c(e.response),JSON.parse(e.response)})).catch((function(e){throw e}));if("FAILED_FROM_DISCONNECT"==n)return o().catch((function(e){console.error("Error refreshing athlete",e)})).finally((function(){})).then((function(){return e("/myaccount/services/redirectingservice/partyquery/v1/attribute","GET",null,i,[200],!0).then((function(e){return c(e.response),JSON.parse(e.response)})).catch((function(e){throw e}))}));if(!n.length){if(t&&JSON.parse(t).timestamp>=new Date){var u=JSON.parse(t);return window.party.attributes=JSON.parse(u.partyAttributes),window.siteData.nikeConnected=a(u.partyAttributes),Promise.resolve(JSON.parse(u.partyAttributes))}return o().catch((function(e){console.error("Error refreshing athlete",e)})).finally((function(){})).then((function(){return e("/myaccount/services/redirectingservice/partyquery/v1/attribute","GET",null,i,[200],!0).then((function(e){return c(e.response),JSON.parse(e.response)})).catch((function(e){throw e}))}))}}().then((function(e){l(e)})):d("Athlete not authorized")}))}))),window.party.partyStarted};var u=new Event("readyToParty");window.document.dispatchEvent(u)}()}();