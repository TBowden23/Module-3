!function(){var e={2035:function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(7831).setCookie,s=["error","warn"],r=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[200],i=new XMLHttpRequest;return new Promise((function(s,r){i.onreadystatechange=function(){4===i.readyState&&(o.includes(i.status)?s(i):r({status:i.status,statusText:i.statusText}))},i.open(t||"GET",e,!0),i.setRequestHeader("Cache-Control","no-cache,no-store,must-revalidate,max-age=0"),i.setRequestHeader("Expires","Sat, 01 Jan 2000 00:00:00 GMT"),i.timeout=1e4,i.ontimeout=function(){-1===e.indexOf("/log")&&h("debug","General","Request Timed Out",{url:e,method:t,body:n})},n?(i.setRequestHeader("Content-Type","application/json"),i.send(n)):i.send()}))},u=function(){return window.isAuthPromise?window.isAuthPromise:(window.isAuthPromise=new Promise((function(t){e=t})),new Promise((function(t){h("debug","isAuthenticated","Getting Status From Engine"),c().then((function(n){h("debug","isAuthenticated","result of getting isAuthenticated",n),e(void 0!==window.accessToken),t(void 0!==window.accessToken)})).catch((function(n){h("debug","isAuthenticated","Error getting tokens for isAuthenticated",n),e(!1),t(!1)}))})));var e},c=function(){return window.accessToken?(h("debug","getTokens","Getting Access Token From Memory"),new Promise((function(e){e(window.accessToken)}))):window.accessTokenPromise?(h("debug","getTokens","Subsequent Request Made"),window.accessTokenPromise):(window.accessTokenPromise=new Promise((function(n,o){e=n,t=o})),new Promise((function(n,o){h("debug","getTokens - Getting Access Token From Engine"),r("/api/v1/athletes/tokens/access","GET",{},[200,401]).then((function(t){401===t.status&&console.debug("Unauthorized request to get tokens");var o=void 0;t&&200===t.status&&(o=JSON.parse(t.response).accessToken),window.accessToken=o,window.accessToken&&(h("debug","getTokens","Successfully Retrieved Access Token"),a(window.accessToken)),e(window.accessToken),n(window.accessToken)})).catch((function(e){h("debug","getTokens","Failed to get tokens",e),t(e),o(e)}))})));var e,t},a=function(e){try{var t=new Date(1e3*JSON.parse(atob(e.split("Bearer ")[1].split(".")[1])).exp);t.setTime(t.getTime()-6e5),setTimeout((function(){d()}),t.getTime()-(new Date).getTime())}catch(e){h("debug","_establishTimeoutTrigger","Failed to Set Expiration Trigger",e)}},d=function(){delete window.accessToken,delete window.accessTokenPromise,delete window.isAuthPromise},l=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.pathname;r("/api/v1/athletes".concat(e?"?targetUrl=".concat(t):""),e?"GET":"DELETE").then((function(e){window.location.href=e.responseText})).catch((function(n){h("debug","_logInOrOut",{isLogin:e,target:t},n)}))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.pathname;l(!0,e)},g=function(){i("SA_ShouldBeLoggedIn","false",-1),r("/api/v1/checkouts","DELETE").catch((function(e){h("warn","Failed to delete checkout session",e)})),l(!1,"/")},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=[],i=JSON.stringify(e,(function(e,t){return"object"===o(t)&&null!==t?n.includes(t)?void 0:n.push(t)&&t:t}),t);return n=null,i},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(e,t){n["additionalInfo".concat(t)]="string"!=typeof e?w(e):e})),{applicationName:"SAClient",logLevel:e.toUpperCase(),logProperties:n}},h=function(e){if(s.includes(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];r("/secured-athlete/api/v1/log","POST",JSON.stringify(m(e,n)),[204]).then((function(e){console.debug("SAClient","Log Successfully Posted To Engine",e.status)})).catch((function(e){console.debug("SAClient","Log Failed to Post to Engine",e)}))}};window.authFunctions={isAuthenticated:u,login:f,logout:g,getTokens:c},e.exports={_buildLoggerBody:m,_establishTimeoutTrigger:a,_getTokens:c,_isAuthenticated:u,_logInOrOut:l,_login:f,_logout:g,_makePromiseRequest:r,_resetAccessMemoryState:d,_saLogger:h,_safeStringify:w}},7831:function(e){var t=function(e){var t,n=document.cookie,o=e+"=",i=n.indexOf(o);if(-1==i){if(0!=(i=n.indexOf(o)))return null}else-1==(t=document.cookie.indexOf(";",i))&&(t=n.length);return decodeURI(n.substring(i+o.length,t))},n=function(e){var t=document.cookie.split(";");return(t=t.map((function(e){return{name:e.slice(0,e.indexOf("=")).trim(),value:e.slice(e.indexOf("=")+1)}}))).filter((function(t){return t.name.includes(e)}))},o=function(e,t,n){var o;if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toGMTString()}else o="";return document.cookie=e+"="+t+o+"; path=/",!0};e.exports={checkCookie:function(e){return!!t(e)},getCookie:t,setCookie:o,deleteCookie:function(e){return o(e,"",-1)},queryCookiesByName:n,queryCookiesByNameAndValue:function(e,t){return n(e).filter((function(e){return e.value===t}))},replaceCookieValue:function(e,n,i,s){var r=t(e);if(void 0===r)return!1;r.toLowerCase()===n.toLowerCase()&&o(e,i,s)}}}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}(2035)}();